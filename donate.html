<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support the Campaign - NSTCG Donations</title>

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Support North Swanage Traffic Safety Campaign">
  <meta property="og:description"
    content="Help us fight for safer streets. Your donation supports our community campaign against dangerous traffic changes.">
  <meta property="og:image" content="https://nstcg.org/images/social-share-preview.jpg">
  <meta property="og:url" content="https://nstcg.org/donate">
  <meta property="og:type" content="website">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">

  <!-- Animate.css CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <!-- CSS - Direct link to prevent FOUC on mobile -->
  <link rel="stylesheet" href="css/main.css">
  <!-- Additional CSS will be bundled by Vite -->
</head>

<body>
  <!-- Navigation -->
  <div id="navigation-placeholder"></div>

  <main class="donate-page">
    <!-- Hero Section -->
    <section class="donate-hero">
      <div class="container">
        <h1 class="animate__animated animate__fadeInDown">Support the Campaign</h1>
        <p class="animate__animated animate__fadeInUp">Your donation helps us fight for safer streets in Swanage</p>

        <!-- Campaign Stats -->
        <div class="hero-stats animate__animated animate__fadeIn animate__delay-1s">
          <!-- Live Cost Counter -->
          <div class="cost-counter">
            <h2>Campaign Running Costs</h2>
            <div class="counter-display">
              <span class="currency">Â£</span>
              <span class="amount" id="cost-amount">0</span>
              <span class="label">and counting...</span>
            </div>
            <div class="cost-breakdown">
              <details>
                <summary>Cost breakdown</summary>
                <ul>
                  <li>Engineering, Research and Development: Â£5,000/mo</li>
                  <li>Software & Hosting: Â£425/mo</li>
                  <li>Canvassing and Materials: Â£100/mo</li>
                </ul>
              </details>
            </div>
          </div>

          <!-- Total Donations Card -->
          <div class="total-donations-card">
            <h2>Total Raised</h2>
            <div id="total-donations-loading" class="total-loading">
              <div class="loading-spinner"></div>
              <p>Loading total...</p>
            </div>
            <div id="total-donations-display" style="display:none;">
              <div class="counter-display">
                <span class="currency">Â£</span>
                <span class="amount" id="total-donations-value">0.00</span>
              </div>
              <div class="total-info">
                <p>from <span id="total-donations-count">0</span> supporters</p>
              </div>
              <div class="progress-to-goal">
                <div class="progress-bar">
                  <div class="progress-fill" id="progress-fill"></div>
                </div>
                <p class="progress-text">Help us reach our goals!</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Prize Pool Information -->
        <div class="prize-pool-info animate__animated animate__fadeIn animate__delay-2s">
          <h3><i class="fas fa-trophy"></i> Survey Deadline Prize Pool</h3>
          <div class="prize-pool-content">
            <p>Donate before <strong>June 29, 2025</strong> and <strong>100%</strong> of your donation will be allocated
              to our prize fund!</p>
            <div class="prize-tiers">
              <div class="prize-tier gold">
                <div class="prize-icon">ðŸ¥‡</div>
                <div class="prize-label">1st Place</div>
                <div class="prize-desc">70% of prize fund</div>
              </div>
              <div class="prize-tier silver">
                <div class="prize-icon">ðŸ¥ˆ</div>
                <div class="prize-label">2nd Place</div>
                <div class="prize-desc">20% of prize fund</div>
              </div>
              <div class="prize-tier bronze">
                <div class="prize-icon">ðŸ¥‰</div>
                <div class="prize-label">3rd Place</div>
                <div class="prize-desc">10% of prize fund</div>
              </div>
            </div>
            <p class="prize-note">Winners will be announced based on the participation leaderboard rankings after the
              survey deadline.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Donation Form Section -->
    <section class="donation-form-section">
      <div class="container">
        <div class="donation-content">
          <div class="donation-card">
            <h2>Make a Donation</h2>

            <!-- Amount Selection -->
            <div class="amount-selector">
              <button class="amount-btn" data-amount="10">Â£10</button>
              <button class="amount-btn" data-amount="25">Â£25</button>
              <button class="amount-btn" data-amount="50">Â£50</button>
              <button class="amount-btn" data-amount="100">Â£100</button>
              <button class="amount-btn other" data-amount="other">Other</button>
            </div>

            <!-- Custom Amount Input -->
            <div class="custom-amount" style="display:none;">
              <label for="custom-amount">Enter amount (Â£)</label>
              <input type="number" id="custom-amount" min="1" max="1000" placeholder="Enter amount">
            </div>

            <!-- Donor Info -->
            <form id="donation-form">
              <div class="form-group">
                <label for="donor-name">Name</label>
                <input type="text" id="donor-name" name="name" required placeholder="Your full name">
              </div>

              <div class="form-group">
                <label for="donor-email">Email</label>
                <input type="email" id="donor-email" name="email" required placeholder="your@email.com">
              </div>

              <div class="form-group">
                <label for="donor-message">Message (optional)</label>
                <textarea id="donor-message" name="message" rows="3"
                  placeholder="Why are you supporting this campaign?"></textarea>
              </div>

              <!-- Points Preview -->
              <div class="points-preview">
                <p>You'll earn <strong id="points-preview">0</strong> leaderboard points!</p>
              </div>

              <button type="submit" class="donate-btn" disabled>
                Donate Â£<span id="selected-amount">0</span>
              </button>
            </form>
          </div>

          <!-- Recent Donations -->
          <div class="recent-donations">
            <h3>Recent Supporters</h3>
            <div id="donations-feed">
              <div class="donations-loading">
                <div class="loading-spinner"></div>
                <p>Loading recent donations...</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Success/Error Messages (hidden by default) -->
    <div id="donation-success" class="donation-message success-message" style="display:none;">
      <div class="container">
        <h2>Thank You!</h2>
        <p>Your donation has been processed successfully.</p>
        <p>Check your email for a receipt.</p>
        <a href="/" class="btn btn-primary">Return to Home</a>
      </div>
    </div>

    <div id="donation-error" class="donation-message error-message" style="display:none;">
      <div class="container">
        <h2>Payment Cancelled</h2>
        <p>Your donation was not processed.</p>
        <p>If you experienced any issues, please contact us at <a href="mailto:kai@oceanheart.ai">kai@oceanheart.ai</a>
        </p>
        <button onclick="location.reload()" class="btn btn-primary">Try Again</button>
      </div>
    </div>
  </main>

  <footer class="footer">
    <p>North Swanage Community Group | Protecting Our Neighborhoods Since 2020</p>
    <div class="footer-links">
      <a href="/privacy-policy.html">Privacy Policy</a>
      <span class="footer-separator">Â·</span>
      <a href="/terms-and-conditions.html">Terms & Conditions</a>
    </div>
  </footer>

  <!-- Stripe JS -->
  <script src="https://js.stripe.com/v3/"></script>
  <!-- Vite Entry Point -->
  <script type="module" src="/js/donate-entry.js"></script>

  <!-- Vercel Speed Insights -->
  <script>
    // Only load Vercel Speed Insights in production
    if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
      window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };

      const script = document.createElement('script');
      script.defer = true;
      script.src = '/_vercel/speed-insights/script.js';
      document.head.appendChild(script);
    }
  </script>
</body>

</html>